<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Members Access | FormFactor Tips</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 24px; background: #0b0f17; color: #fff; }
    .wrap { max-width: 720px; margin: 0 auto; }
    .card { background: #121a2a; border: 1px solid #22304a; border-radius: 14px; padding: 18px; box-shadow: 0 8px 24px rgba(0,0,0,0.25); }
    h1 { margin: 0 0 10px; font-size: 26px; }
    p { margin: 8px 0; color: #cbd5e1; line-height: 1.5; }
    .row { display: flex; gap: 10px; margin-top: 14px; }
    input { flex: 1; padding: 12px 12px; border-radius: 10px; border: 1px solid #334155; background: #0f172a; color: #fff; font-size: 16px; }
    button { padding: 12px 14px; border-radius: 10px; border: 0; background: #3b82f6; color: #fff; font-weight: 700; cursor: pointer; }
    button:hover { filter: brightness(1.05); }
    .msg { margin-top: 12px; font-weight: 700; }
    .msg.ok { color: #34d399; }
    .msg.bad { color: #fb7185; }
    .links { margin-top: 16px; display: none; }
    .pill { display:inline-block; padding: 6px 10px; border-radius: 999px; background: #0f172a; border: 1px solid #334155; color:#cbd5e1; font-size: 13px; margin-top: 6px;}
    .link-grid { margin-top: 12px; display: grid; gap: 10px; }
    .a { display:block; padding: 12px; background:#0f172a; border:1px solid #334155; border-radius: 12px; text-decoration:none; color:#fff; }
    .a:hover { border-color:#60a5fa; }
    .small { font-size: 12px; color:#94a3b8; margin-top: 10px;}
    .danger { margin-top: 14px; background: #1b2336; border: 1px solid #334155; padding: 12px; border-radius: 12px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Members Access</h1>
      <p>Enter your access code below to unlock Best Bets + Raw Data selections.</p>

      <div class="row">
        <input id="codeInput" type="text" placeholder="Enter your code" autocomplete="off" />
        <button id="unlockBtn" type="button">Unlock</button>
      </div>

      <div id="status" class="msg"></div>
      <div id="memberInfo" class="pill" style="display:none;"></div>

      <div id="links" class="links">
        <div class="link-grid" id="linkGrid">
          <!-- ✅ Correct member links -->
          <a class="a" id="bestBetsLink" href="/formfactor_best_value_bets.html" target="_blank" rel="noopener">Best Bets</a>
          <a class="a" id="rawDataLink" href="/picks.html" target="_blank" rel="noopener">Raw Data Pack</a>
        </div>

        <div class="danger">
          <p class="small" style="margin:0;">
            18+ only. Gamble responsibly. Selections are informational/entertainment and outcomes are not guaranteed.
          </p>
        </div>

        <p class="small">Need help? Email: <strong>support@formfactortips.com</strong></p>
      </div>
    </div>
  </div>

  <script>
    // --- CONFIG ---
    // Codes:
    // - Weekly: Best Bets + Raw Data (7 days)
    // - Monthly: Best Bets + Raw Data (30 days)
    // - Annual: Best Bets + Raw Data (12 months)
    // - Best Bets Only: Best Bets only (7 days)
    const CODES = {
      // Full access (Best Bets + Raw Data)
      "FFW700":   { level: "weekly",   days: 7,   label: "Member (7 days)" },
      "FFM840":   { level: "monthly",  days: 30,  label: "Member (30 days)" },
      "FFA269":   { level: "annual",   days: 365, label: "Member (12 months)" },

      // Best Bets only
      "FFBETS30": { level: "bestbets", days: 7,  label: "Best Bets Only (7 days)" }
    };

    // Storage keys
    const KEY_LEVEL = "ff_member_level";
    const KEY_EXPIRES = "ff_member_expires";

    // Elements
    const codeInput = document.getElementById("codeInput");
    const unlockBtn = document.getElementById("unlockBtn");
    const statusEl = document.getElementById("status");
    const linksEl = document.getElementById("links");
    const memberInfoEl = document.getElementById("memberInfo");
    const bestBetsLink = document.getElementById("bestBetsLink");
    const rawDataLink  = document.getElementById("rawDataLink");

    function nowMs() { return Date.now(); }

    function setStatus(msg, ok) {
      statusEl.textContent = msg;
      statusEl.className = "msg " + (ok ? "ok" : "bad");
    }

    function normalizeCode(s) {
      return (s || "").trim().toUpperCase().replace(/\s+/g, "");
    }

    function saveAccess(level, expiresAtMs) {
      localStorage.setItem(KEY_LEVEL, level);
      localStorage.setItem(KEY_EXPIRES, String(expiresAtMs));
    }

    function clearAccess() {
      localStorage.removeItem(KEY_LEVEL);
      localStorage.removeItem(KEY_EXPIRES);
    }

    function getAccess() {
      const level = localStorage.getItem(KEY_LEVEL);
      const expiresStr = localStorage.getItem(KEY_EXPIRES);
      const expires = expiresStr ? Number(expiresStr) : 0;

      if (!level || !expires || Number.isNaN(expires)) return null;
      if (nowMs() > expires) {
        clearAccess();
        return null;
      }
      return { level, expires };
    }

    function formatExpiry(ms) {
      try {
        return new Date(ms).toLocaleString("en-AU", { timeZone: "Australia/Sydney" });
      } catch {
        return new Date(ms).toString();
      }
    }

    function showLinksForLevel(level) {
      linksEl.style.display = "block";

      // Default: show both
      if (bestBetsLink) bestBetsLink.style.display = "block";
      if (rawDataLink)  rawDataLink.style.display  = "block";

      // Best Bets only: hide Raw Data
      if (level === "bestbets") {
        if (rawDataLink) rawDataLink.style.display = "none";
      }
    }

    function renderAccess(access) {
      if (!access) {
        linksEl.style.display = "none";
        memberInfoEl.style.display = "none";
        return;
      }

      const expiresText = formatExpiry(access.expires);

      const label =
        (access.level === "annual")   ? "Member (12 months)" :
        (access.level === "monthly")  ? "Member (30 days)" :
        (access.level === "weekly")   ? "Member (7 days)" :
        (access.level === "bestbets") ? "Best Bets Only (30 days)" :
        "Member";

      memberInfoEl.style.display = "inline-block";
      memberInfoEl.textContent = `${label} • Expires: ${expiresText}`;

      showLinksForLevel(access.level);
    }

    function unlock() {
      const code = normalizeCode(codeInput.value);

      if (!code) {
        setStatus("Please enter a code.", false);
        return;
      }

      const conf = CODES[code];
      if (!conf) {
        setStatus("Invalid code. Please check and try again.", false);
        return;
      }

      const expiresAt = nowMs() + conf.days * 24 * 60 * 60 * 1000;
      saveAccess(conf.level, expiresAt);

      setStatus(`Access granted — ${conf.label}.`, true);
      renderAccess(getAccess());
    }

    // Button click
    unlockBtn.addEventListener("click", unlock);

    // Enter key in input
    codeInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") unlock();
    });

    // On load: auto-unlock if valid stored access exists
    renderAccess(getAccess());
  </script>
</body>
</html>


